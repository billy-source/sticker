<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Sticker Shop</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<header class="bg-white shadow">
      <div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
        <h1 class="text-4xl font-bold text-white-800">Stickerly</h1>
        <nav>
           <ul class="flex space-x-4">
            <li><a href="index.html" class="hover:bg-green-600 rounded-lg px-4 py-2 ">Home</a></li>
            <li><a href="shop.html" class="hover:bg-green-600 rounded-lg  px-4 py-2 border-b-2 border-green-500">Shop</a></li>
            <li><a href="about.html" class="hover:bg-green-600 rounded-lg px-4 py-2">About</a></li>
            <li><a href="product.html" class="hover:bg-green-600 rounded-lg px-4 py-2">Product</a></li>
            <li><a href="contact.html" class="hover:bg-green-600 rounded-lg px-4 py-2">Contact</a></li>
           </ul>
        </nav>
      </div>
  
    </header>

<body class="bg-gray-100 p-4">
  <div class="max-w-2xl mx-auto">
    <div class="text-center mt-4">
  <input id="searchInput" type="text" placeholder="Search stickers..." class="border px-3 py-2 rounded" />
  <button onclick="searchStickers()" class="bg-blue-500 text-white px-4 py-2 rounded ml-2">Search</button>
</div>
<div id="results" class="flex flex-wrap justify-center mt-4 gap-4"></div>
    <h2 class="text-xl font-bold mt-6">Stickers</h2>
    <div id="stickerContainer" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mt-4"></div>
    <h2 class="text-xl font-bold mt-6">Cart</h2>
    <ul id="cart" class="list-disc pl-5 mt-2"></ul>
  </div>
  <script>
    const apiKey = 'YOUR_STIPOP_API_KEY'; // Replace with your Stipop API key
const userId = 'unique_user_id'; // Replace with your user ID

const searchInput = document.getElementById('searchInput');
const stickerContainer = document.getElementById('stickerContainer');
const cartList = document.getElementById('cart');
let cart = [];

searchInput.addEventListener('input', async () => {
  const query = searchInput.value.trim();
  if (query.length < 3) return;

  try {
    const response = await fetch(
      `https://messenger.stipop.io/v1/search?q=${encodeURIComponent(query)}&userId=${userId}`,
      {
        headers: { apikey: apiKey }
      }
    );
    const data = await response.json();
    displayStickers(data.body);
  } catch (error) {
    console.error('Error fetching stickers:', error);
  }
});

function displayStickers(stickers) {
  stickerContainer.innerHTML = '';
  stickers.forEach(sticker => {
    const stickerDiv = document.createElement('div');
    stickerDiv.className = 'bg-white p-2 rounded shadow';
    stickerDiv.innerHTML = `
      <img src="sticker.stickerImg" alt="Sticker" class="w-full h-auto mb-2">
      <button class="addToCartBtn bg-blue-500 text-white px-2 py-1 rounded" data-id="{sticker.stickerId}" data-name="${sticker.stickerName}">Add to Cart</button>
    `;
    stickerContainer.appendChild(stickerDiv);
  });

  document.querySelectorAll('.addToCartBtn').forEach(btn => {
    btn.addEventListener('click', addToCart);
  });
}

function addToCart(e) {
  const stickerId = e.target.getAttribute('data-id');
  const stickerName = e.target.getAttribute('data-name');
  if (!cart.find(item => item.id === stickerId)) {cart.push({ id: stickerId, name: stickerName });
    updateCartUI();
  }
}

function updateCartUI() {
  cartList.innerHTML = '';
  cart.forEach(item => {
    const li = document.createElement('li');
    li.textContent = item.name;
    cartList.appendChild(li);
  });
}
  


  </script>
</body>
</html>
